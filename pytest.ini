# pytest configuration for The Gathering test suite
# Single source of truth for all pytest settings

[pytest]
# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test markers for categorization
markers =
    unit: Unit tests with mocked dependencies (fast, SQLite)
    integration: Integration tests with real PostgreSQL (medium speed)
    e2e: End-to-end tests with full HTTP stack (slow, PostgreSQL)
    slow: Tests that take longer to run
    ci: Tests designed for CI environment
    asyncio: Async tests using asyncio

# Command-line options
addopts =
    -v
    --tb=short
    --strict-markers
    --disable-warnings

# Minimum pytest version
minversion = 6.0

# Asyncio configuration
asyncio_mode = auto
# NOTE: asyncio_default_fixture_loop_scope is NOT set globally
# Each test type (unit/integration/e2e) defines its own scope in conftest.py

# Environment configuration
env_files =
    .env.test

# Files to ignore during collection
collect_ignore =
    setup.py
    venv
    .venv

# Logging configuration (optional, uncomment if needed)
# log_cli = true
# log_cli_level = INFO

2025-09-30T00:59:21.8393670Z ##[group]Run pytest tests/unit/ -v --tb=short
2025-09-30T00:59:21.8394057Z [36;1mpytest tests/unit/ -v --tb=short[0m
2025-09-30T00:59:21.8426465Z shell: /usr/bin/bash -e {0}
2025-09-30T00:59:21.8426690Z env:
2025-09-30T00:59:21.8427163Z   DATABASE_URL: ***localhost:5432/postgres
2025-09-30T00:59:21.8427415Z   CI: true
2025-09-30T00:59:21.8427594Z   SECRET_KEY: test-secret-key-for-ci
2025-09-30T00:59:21.8427832Z   ALGORITHM: HS256
2025-09-30T00:59:21.8428019Z   ACCESS_TOKEN_EXPIRE_MINUTES: 30
2025-09-30T00:59:21.8428250Z   APP_NAME: The Gathering Test
2025-09-30T00:59:21.8428461Z   DEBUG: false
2025-09-30T00:59:21.8428651Z   DEEPL_API_KEY: test-deepl-key-for-ci
2025-09-30T00:59:21.8428958Z   pythonLocation: /opt/hostedtoolcache/Python/3.13.7/x64
2025-09-30T00:59:21.8429350Z   PKG_CONFIG_PATH: /opt/hostedtoolcache/Python/3.13.7/x64/lib/pkgconfig
2025-09-30T00:59:21.8429719Z   Python_ROOT_DIR: /opt/hostedtoolcache/Python/3.13.7/x64
2025-09-30T00:59:21.8430055Z   Python2_ROOT_DIR: /opt/hostedtoolcache/Python/3.13.7/x64
2025-09-30T00:59:21.8430421Z   Python3_ROOT_DIR: /opt/hostedtoolcache/Python/3.13.7/x64
2025-09-30T00:59:21.8430754Z   LD_LIBRARY_PATH: /opt/hostedtoolcache/Python/3.13.7/x64/lib
2025-09-30T00:59:21.8431035Z ##[endgroup]
2025-09-30T00:59:23.0846431Z ============================= test session starts ==============================
2025-09-30T00:59:23.0848908Z platform linux -- Python 3.13.7, pytest-8.4.1, pluggy-1.6.0 -- /opt/hostedtoolcache/Python/3.13.7/x64/bin/python
2025-09-30T00:59:23.0854194Z cachedir: .pytest_cache
2025-09-30T00:59:23.0854726Z rootdir: /home/runner/work/the_gathering_beta/the_gathering_beta
2025-09-30T00:59:23.0855330Z configfile: pytest.ini
2025-09-30T00:59:23.0855765Z plugins: anyio-4.11.0, asyncio-0.25.1, cov-6.2.1
2025-09-30T00:59:23.0856416Z asyncio: mode=Mode.AUTO, asyncio_default_fixture_loop_scope=None
2025-09-30T00:59:23.9277205Z collecting ... collected 35 items
2025-09-30T00:59:23.9278018Z 
2025-09-30T00:59:23.9502660Z tests/unit/test_async_background_service.py::TestAsyncBackgroundService::test_process_message_translation_background_success PASSED [  2%]
2025-09-30T00:59:23.9537038Z tests/unit/test_async_background_service.py::TestAsyncBackgroundService::test_process_message_translation_background_disabled PASSED [  5%]
2025-09-30T00:59:23.9577637Z tests/unit/test_async_background_service.py::TestAsyncBackgroundService::test_process_message_translation_background_existing_translation PASSED [  8%]
2025-09-30T00:59:23.9616041Z tests/unit/test_async_background_service.py::TestAsyncBackgroundService::test_process_message_translation_background_translation_failure PASSED [ 11%]
2025-09-30T00:59:23.9649013Z tests/unit/test_async_background_service.py::TestAsyncBackgroundService::test_log_user_activity_background_success PASSED [ 14%]
2025-09-30T00:59:23.9681006Z tests/unit/test_async_background_service.py::TestAsyncBackgroundService::test_log_user_activity_background_without_details PASSED [ 17%]
2025-09-30T00:59:23.9709417Z tests/unit/test_async_background_service.py::TestAsyncBackgroundService::test_notify_room_users_background_success PASSED [ 20%]
2025-09-30T00:59:23.9742672Z tests/unit/test_async_background_service.py::TestAsyncBackgroundService::test_notify_room_users_background_no_exclusions PASSED [ 22%]
2025-09-30T00:59:23.9781548Z tests/unit/test_async_background_service.py::TestAsyncBackgroundService::test_background_task_error_logging PASSED [ 25%]
2025-09-30T00:59:24.0131665Z tests/unit/test_async_repositories.py::TestAsyncUserRepository::test_create_user_success PASSED [ 28%]
2025-09-30T00:59:24.0382711Z tests/unit/test_async_repositories.py::TestAsyncUserRepository::test_get_by_id_success PASSED [ 31%]
2025-09-30T00:59:24.0548797Z tests/unit/test_async_repositories.py::TestAsyncUserRepository::test_get_by_id_not_found PASSED [ 34%]
2025-09-30T00:59:24.0770484Z tests/unit/test_async_repositories.py::TestAsyncUserRepository::test_get_by_username_success PASSED [ 37%]
2025-09-30T00:59:24.0996982Z tests/unit/test_async_repositories.py::TestAsyncUserRepository::test_get_by_email_success PASSED [ 40%]
2025-09-30T00:59:24.1225688Z tests/unit/test_async_repositories.py::TestAsyncUserRepository::test_update_user_success PASSED [ 42%]
2025-09-30T00:59:24.1446763Z tests/unit/test_async_repositories.py::TestAsyncUserRepository::test_username_exists_true PASSED [ 45%]
2025-09-30T00:59:24.1609463Z tests/unit/test_async_repositories.py::TestAsyncUserRepository::test_username_exists_false PASSED [ 48%]
2025-09-30T00:59:24.1786605Z tests/unit/test_async_repositories.py::TestAsyncRoomRepository::test_create_room_success PASSED [ 51%]
2025-09-30T00:59:24.2001732Z tests/unit/test_async_repositories.py::TestAsyncRoomRepository::test_get_active_rooms PASSED [ 54%]
2025-09-30T00:59:24.2225304Z tests/unit/test_async_repositories.py::TestAsyncRoomRepository::test_get_user_count PASSED [ 57%]
2025-09-30T00:59:24.2447802Z tests/unit/test_async_repositories.py::TestAsyncRoomRepository::test_update_room_success PASSED [ 60%]
2025-09-30T00:59:24.2760305Z tests/unit/test_async_repositories.py::TestAsyncMessageRepository::test_create_message_success PASSED [ 62%]
2025-09-30T00:59:24.3026152Z tests/unit/test_async_repositories.py::TestAsyncMessageRepository::test_get_room_messages_success PASSED [ 65%]
2025-09-30T00:59:24.3291449Z tests/unit/test_async_repositories.py::TestAsyncMessageRepository::test_get_conversation_messages_success PASSED [ 68%]
2025-09-30T00:59:24.3454479Z tests/unit/test_async_repositories.py::TestAsyncMessageRepository::test_get_all_messages_pagination PASSED [ 71%]
2025-09-30T00:59:24.3694231Z tests/unit/test_async_repositories.py::TestAsyncMessageRepository::test_exists_message PASSED [ 74%]
2025-09-30T00:59:24.3982999Z tests/unit/test_async_repositories.py::TestAsyncMessageRepository::test_delete_message_success PASSED [ 77%]
2025-09-30T00:59:24.4010943Z tests/unit/test_async_translation_service.py::TestAsyncTranslationService::test_translate_message_content_success PASSED [ 80%]
2025-09-30T00:59:24.4143538Z tests/unit/test_async_translation_service.py::TestAsyncTranslationService::test_translate_message_content_empty_content PASSED [ 82%]
2025-09-30T00:59:24.9187619Z tests/unit/test_async_translation_service.py::TestAsyncTranslationService::test_translate_message_content_invalid_language PASSED [ 85%]
2025-09-30T00:59:24.9228363Z tests/unit/test_async_translation_service.py::TestAsyncTranslationService::test_translate_multiple_languages_success PASSED [ 88%]
2025-09-30T00:59:24.9258267Z tests/unit/test_async_translation_service.py::TestAsyncTranslationService::test_translate_multiple_languages_empty_list PASSED [ 91%]
2025-09-30T00:59:24.9323283Z tests/unit/test_async_translation_service.py::TestAsyncTranslationService::test_get_existing_translation_found PASSED [ 94%]
2025-09-30T00:59:24.9365752Z tests/unit/test_async_translation_service.py::TestAsyncTranslationService::test_get_existing_translation_not_found PASSED [ 97%]
2025-09-30T00:59:25.0860759Z tests/unit/test_async_translation_service.py::TestAsyncTranslationService::test_translate_and_store_message_success PASSED [100%]
2025-09-30T00:59:25.0861966Z 
2025-09-30T00:59:25.0862684Z ======================== 35 passed, 1 warning in 1.86s =========================
